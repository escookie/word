<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>단어 외우기</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        #word-container {
            margin-top: 50px;
        }

        #word {
            font-size: 54px;
            font-weight: bold;
            cursor: pointer;
        }

        #meaning {
            margin-top: 10px;
            font-size: 18px;
        }

        #correct-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: medium;
        }

        #unknown-btn{
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #9e9e9e;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: medium;
        }

        #correct-btn:hover {
            background-color: #45a049;
        }

        #unknown-words{
            margin-top: 20px;
            font-size: 25px;
            line-height: 210%;
            color: #2f2f2f;
        }

        .test-container {
            padding: 2%;
            text-align: center;
        }

        #canvas {
            border: 1px solid;
            background-color: white;
        }
    </style>
</head>
<body>
    <div id="word-container">
        <div id="word">ride</div>
        <div id="meaning">타다</div>
    </div>
    <button id="correct-btn">다음!</button>
    <button id="unknown-btn">모르겠다</button>

    <div id="unknown-words"></div>

    <div class="test-container">
        <canvas id="canvas"></canvas>
    </div>

    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        function resizeCanvas() {
            canvas.width = window.innerWidth * 0.6;
            canvas.height = window.innerHeight * 0.4;
        }

        window.addEventListener("resize", resizeCanvas);
        resizeCanvas();

        var getPosition = function(e) {
            var x, y;
            if(e.type.indexOf("mouse") > -1) {
                x = e.offsetX;
                y = e.offsetY;
            } else { 
                var rect = e.target.getBoundingClientRect();
                x = e.changedTouches[0].clientX - rect.x;
                y = e.changedTouches[0].clientY - rect.y;
            }
            return {x:x, y:y};
        };
        var toggleDrawing = function(e) {
            this.drawing = e.type === "mousedown" || e.type === "touchstart";
            if(this.drawing) {
                var pos = getPosition(e);
                var ctx = this.getContext("2d");
                ctx.beginPath();
                ctx.moveTo(pos.x, pos.y);
            }
        }
        var draw = function(e) {
            if(this.drawing) {
                e.preventDefault();
                var pos = getPosition(e);
                var ctx = this.getContext("2d");
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
            }
        };
        canvas.addEventListener("mousemove", draw);
        canvas.addEventListener("mousedown", toggleDrawing);
        canvas.addEventListener("mouseup", toggleDrawing);
        canvas.addEventListener("touchmove", draw); 
        canvas.addEventListener("touchstart", toggleDrawing);
        canvas.addEventListener("touchend", toggleDrawing);

        // 함수를 만들어 canvas를 지우는 역할을 수행
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        const words = [
            { word: "ride", meaning: "타다" },
            { word: "railway", meaning: "철도" },
            { word: "hanging", meaning: "매달려 있는" },
            { word: "frozen", meaning: "얼어붙은" },
            { word: "country", meaning: "나라" },
            { word: "vehicle", meaning: "교통 수단" },
            { word: "get around", meaning: "돌아다니다, 이동하다" },
            { word: "take", meaning: "데려가다" },
            { word: "people", meaning: "사람들" },
            { word: "there are", meaning: "~들이 있다" },
            { word: "across", meaning: "~를 가로질러" },
            { word: "special", meaning: "특별한" }
        ];

        let currentIndex = 0;

        const wordElement = document.getElementById("word");
        const meaningElement = document.getElementById("meaning");
        const correctButton = document.getElementById("correct-btn");
        const unknownButton = document.getElementById("unknown-btn");
        const unknownWordsContainer = document.getElementById("unknown-words");

        updateWord();

        correctButton.addEventListener("click", () => {
            currentIndex++;
            if (currentIndex === words.length) {
                currentIndex = 0;
            }
            updateWord();
            // 다음 버튼 클릭 시 canvas를 지우는 함수 호출
            clearCanvas();
        });

        unknownButton.addEventListener("click", () => {
            showUnknownWord();
            currentIndex++;
            if (currentIndex === words.length) {
                currentIndex = 0;
            }
            updateWord();
            // 모르겠다 버튼 클릭 시 canvas를 지우는 함수 호출
            clearCanvas();
        });

        function updateWord() {
            const currentWord = words[currentIndex];
            wordElement.textContent = currentWord.word;
            meaningElement.textContent = currentWord.meaning;
            meaningElement.style.display = "none";
            wordElement.addEventListener("click", showMeaning);
        }

        function showMeaning() {
            meaningElement.style.display = "block";
            wordElement.removeEventListener("click", showMeaning);
        }

        function showUnknownWord() {
            const currentWord = words[currentIndex];
            const unknownWordElement = document.createElement("div");
            unknownWordElement.textContent = `${currentWord.word}: ${currentWord.meaning}`;
            unknownWordsContainer.appendChild(unknownWordElement);
        }
    </script>
</body>
</html>